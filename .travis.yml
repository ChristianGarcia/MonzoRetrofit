language: java
jdk: oraclejdk8
env:
  global:
  - secure: dVtOoBPb5R6FxEOvVLmwj8Spq1cRwuJzPj1VVgmTxngl1a7EcoAk7vLHzl/I6qWTZmtx+TA294k22yLnOAUgWzl1W17af/wViy22r94XwRsw4FW2OHkUHmkUG6Q5FjrvZlWLbhuAC9NFZRun8xtZQqSiD7Wb95jxLN5HDARrfZS5ze/XNit5sEkka4X4vqIzH4SXlAlyd4aqUnUtG+orW0V2oSdycP+izmUZBvyzLPpBeVM90Hq6s+CncOHXUYZi8mcG5G44E0JcOm1P9voJPw1mAiRSyqU2ZPY4t9WxeUrHw9p2EfyW1AnmnM8k6Fe1DB9ZD0RB+x5iUaRG+h43yyHuAnMGfYk8uw4JzfhRdf/gxrPJPcEic6VufRgDPBZLFhUqqCzNLNuu+LxNieK8AkS/jd4Ro4XhuDNtGZdkARa2FcUmj3+NY08L0pKJPgx/Sc0IF/TYgZ/99u9KqDPgyESkiV1XkYQU3tVK6CRZcintoTqYZQKJggY3aVDQxtc0LWjI4J6WLp3Y9cJ9qogh2knJ33ekYjv9CmN76ao6qIa+xrMR2pusIFOF1BgAfNGXcOpLiU6agHSBM5d752RAufrO0I6K08LvFPpqeI5wxTPveRGSQIJKiFppZXs39DtoiMPC8lpnK18ryppd+N81+GKhzjubkeZWsOJJUnOWIjY=
  - secure: b2k8RrtOIMeXO7sbiX/adHPDH0SBHJyVzGnpBEjoG651FLSPEarPrE0X2ZC2W7h6+2EZ45nQUQR+aDfH78smnDeWpWr4IY9/bc7+hz11QfQFDQiLM/mp5vqdYfXNJ5XWlfDermLBwyE8ynqdhm54Mp/jA6o1aVng9wkW3kAN9lXNn4tHL9E/Ihih69r8RidQ3rj0VlPKAh5j7ih21OHo/zeXWGBVZ7j2w2FQxTmuGoLGgfOEcdH+riE+Mo8W41elMKcxmDJAxj+hG+8gFBY2iC9+0gZUHNU1ubAYxqKC8OAt8WFzaQaFcn/PpV2m/jlIcPikdnC6OK8OMelDV3UxJwbG/qLffby6tXexYy9epsRCvYdRPGEPiXmFZQEnKk+4IHi7EvJlNVSn68WZYhHqsbBE+jeQ9mYzaatyASIXFI5UwRFbH4BeQG0JNLEG/k4Qzl+1osQhkzmK0CVM+d2NBFcdxd22QTgxJC74h4NkiYP9f/2VLNefCA9AFurlxVrATxva1dxEOb8GH7muZhlG00EiwEmgX6Tip94yNZ0gBaJi3dmbfPVADUVZJRSI6IGne0QimXRaI7w3IV1OO7IuMcDTiv8jtnsBrqkXGg/7dqjK+Xebxy9eUt0Ww7hmZ3Ubz4LRivp431C441xztcOIBwZ96zyzUOZ99woLrKb5EdA=
  - secure: Xew7G6aGbAnF6zqKRKj8IUbw9pgBjlcAppiFyvHYI5bdYfDhDF8/wxaUstE6RtrP6dRtmmwYl00UoG8oJCgZlKPgRk5fcobrltjsZebh3Cpsl/XsjeMzowMWRdaSDmKM695Rzz7RXSunmyKsNSHx8JYQBHHIzM1LlSTjTcjU/vXOy8OrvOTsNj5HVYJQEsuUI4Th+9BndR9clviewL8sxnKzuQ/clsTjeSkqOtZ4GjcgVo8Hd5sIuHAVCM/Xelk8FxbkBXoSTNCnW8NpVpDbdJlqfBq5yLq4P53WSEGUgJQHAfgxbAL7gn3wYrVfczR4KKU6E2MzizileqOjKc8dzVcjiSIZ5dfOHkidNACNG9e2FV1pILgaM1CDk/XHxyAFCkN4hxELYau00wU/bCp8cUqGRWzGeZhE68aTN1dSCb/9tOXVliuYRsur/i0QRejLuZt+PwP++irF1aCaXKw5rjZ8IEc01gs7KCbYI6mwPtwMdjHbeVQGcOpCJFHh6lDTpBA7kYRuLcHJ1b/6fTGx39Se/s+fsx17Dc17QBrjCJnQT2DqGHsnqC9lp6IFFMpm0CbDAYluQkq92N5/Aitx66QBUfYMjZ47KnKwBhG7wzyGj4aE2NaYbrp6/DrF5vyBA4wbtTIKzv+gdua6qAXZ3FGIMnh0xQ7FL8WOSs93gPU=
  - secure: LVuG8VdZeQqlBoVR+v+eZKyJ5LrKKt+00MsUpbNZf+ZRRhhXrA4WkfDbFidejrTDpot/L8ojAwWF4RsLhOc5OJCgTTfST+x8lIa/mqr1mVG/Ca+C9v91tuY3BYQEkoBmMT9fvmZmCHWUN4OOXb1PVVDV7pv9gW6OaBav5QytQTHWj/5sFkUIwltmRkqUxce92mIVTzCABzu3HjymUMfRMGVs+Mk4KuJ5M4gYbVSgbrSNnD5JBg4i76bV41IG4X+ieqGniZJwvxuZMCzp+FApo+dD799PqCs2bGI6N+pgAycEHc1FYoqm5G82Z400Ws/nTbAl/sEo6l+QHttkqJnLyk8O3mda580zGpA83KnJ9C8FsHS0zdaqSqYenwwLlQQ0le7J3q+V1OFcUwg71WeLyf2r9Y/IK2ngHJux91kl5mY8AiLqVigrMaFnk2AdnKniSPIp8XaEaes4i5KTJ4+VedW/7S2UFOSJkqEkWIbSgJ1gE22Pxd0DFkWJz5gdO77Ff3cpOd6m7knRtbOOscI+axl8LDG+0mSKVRPdX1R694CwW4L+qoqK1VeN45S7kPX0avYue5MIvTXaF/kOwtChFIEMjocf4LTvxn4ZgBsdWG8P35HFD9wExhZL5icthriuHjUeSrEvUZX7+b/Urf6LBp+IkSRIAW2sjzoa1N0ZWGc=
  - secure: De4qO5KSSIF+XOFE32SrXBbucltbeNIN53qtKtLckYKO5gdPi9ROW1aINhwkdIsGNQXuoKsgJiaicz/BnpHIPt+y6djwQE35anxMOe/EGedMjRaEbvo3YHLdIiyaGg3OGHHZkt3xhLSGD84mwzUHIISNGnqOXrNG3gED5M/I7LXRRc/E/PwInZe1PnCqXMVvmfZl15dwVKLWi5zzaQyU2Tmj+XbihUrBbsVLwcz7E6g5zVYI+yo7/lhuJtXF5PprbgqI+7R/PEJ0rGU2mmzIQBP116oM5xc29519TKtX41/fyr6RlKfsroFM0eQ5z0Qxt+hbZdij+qF5qilMuEQ0U798SN8BNLHDD+HuZv52756uyK9gs0rN0BMOSTo6dDweYd7K+YokZ0vOMs+J7JlLjwj/vkLqOSOUyzusoNEQZcIzK5wIjxwTGzpSSxyt9BNBdn9/lILJ1vejkkK+IFqYch0GonDCiK2Mz/cbFW5bZykN+dy0i8/sKVdbnZMLi3wtgL3kKS2iElgFkEifJh+zwJGkuEM/cHRO1qNAAhq9JbXEX25W2QFBDFCag3wQMmUzvfsuI9IfiXqXieYjM0pnFpC3DeYCELHWqeIQXMOai86XDVNT3Ke5Id2dChyMG4WrMpE6yn9gdyc9Vt01AkEkgdNnvaOWyiAhuKJO5ZIGVEg=

before_install:
- openssl aes-256-cbc -K $encrypted_0c4056e72dfa_key -iv $encrypted_0c4056e72dfa_iv
  -in monzo-retrofit/sign.tar.enc -out monzo-retrofit/sign.tar -d
- tar xvf monzo-retrofit/sign.tar -C monzo-retrofit/

deploy:
- provider: script
  script: ./gradlew uploadArchives
  skip_cleanup: true
  on:
    all_branches: true  #deploys every time, but uploadArchives depends on checkArchivesUpload, which checks everything is fine